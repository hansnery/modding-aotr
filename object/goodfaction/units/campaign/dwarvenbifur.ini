Object DwarvenBifur
	; *** ART Parameters ***
    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPAzanulbizarThror ;HPThror
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
	ButtonImage = HIAzanulbizarThror ;HIThror
	DescriptionStrategic = CONTROLBAR:LW_ToolTip_Gimli
	;ShadowMaxHeight = 999 ;this is causing 2 shadows to be cast when the unit is under a bridge.  Taking it out!
	Draw = W3DScriptedModelDraw ModuleTag_01
	  OkToChangeModelColor = Yes		
	  StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
		;;//====================== MODELS ==================================
		DefaultModelConditionState
			Model               = dubifur_skn
			Skeleton            = DUPhalanx_SKL
			WeaponLaunchBone    = TERTIARY AXE02
		End
		;;//================== ANIMATIONS =================================================================

		;//;------------------ MOVING & DYING ---------------------------

		;//;======= DYING

		AnimationState        = STUNNED_FLAILING
			Animation           			= FlyA
				AnimationName      	 		= DUPhalanx_FLYA
				AnimationMode       		= LOOP
			End
			Animation           			= FlyB
				AnimationName      	 		= DUPhalanx_FLYB
				AnimationMode       		= LOOP
			End
			Animation           			= FlyC
				AnimationName      	 		= DUPhalanx_FLYC
				AnimationMode       		= LOOP
			End
			Flags               = RANDOMSTART
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
		
		AnimationState        = DYING SPLATTED
 		Animation						= Splat
			AnimationName				= DUPhalanx_LNDA
			AnimationMode				= ONCE
		End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

		AnimationState        = DYING
		Animation = Dying_1A
			AnimationName = DUPhalanx_DIEA
			AnimationMode = ONCE
		End
		Animation = Dying_1B
			AnimationName = DUPhalanx_DIEB
			AnimationMode = ONCE
		End
		Animation = Dying_1C
			AnimationName = DUPhalanx_DIEC
			AnimationMode = ONCE
		End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
		
		AnimationState        = STUNNED_STANDING_UP
 		Animation = Standing_Back_Up
			AnimationName = DUPhalanx_GTPA
			AnimationMode = ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
		End
	
		AnimationState        = STUNNED
 		Animation						= Splat
			AnimationName				= DUPhalanx_LNDA
			AnimationMode				= ONCE
		End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
			
		AnimationState						= PARALYZED
			Animation						= ALERT_1
				AnimationName				= DUPhalanx_IDLA
				AnimationMode				= LOOP
				AnimationPriority			= 10
			End
		End

		;//;======= MOVING
	
	

;		AnimationState        = MOVING FIRING_OR_PREATTACK_A
;			ShareAnimation		= Yes
;			Animation           = RunAndFire
;				AnimationName       = DUDain_ATRA
;				AnimationMode       = LOOP
;			End
;			Flags               = RANDOMSTART 
;		End

		AnimationState				=	MOVING ATTACKING
			Animation						= RUNA
				AnimationName				= DUPhalanx_RUND
				AnimationMode				= LOOP
				Distance					= 25
			End
			Flags					=	RANDOMSTART
			;//ParticleSysBone		=	None InfantryDustTrails
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
	
		AnimationState				=	MOVING
			Animation						= RUNB
				AnimationName				= DUPhalanx_RUNA
				AnimationMode				= LOOP
				;Distance					= 30
			End
			Flags					=	RANDOMSTART
			;//ParticleSysBone		=	None InfantryDustTrails
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End


		;;//------------------ ATTACKING  -------------------------------

		;// AXE THROW
		AnimationState		= FIRING_OR_PREATTACK_C
			Animation						= Pointing1A
				AnimationName				= DUPhalanx_PNTA
				AnimationMode				= LOOP
			End
			Animation						= Pointing1B
				AnimationName				= DUPhalanx_PNTB
				AnimationMode				= LOOP
			End
			Animation						= Pointing1C
				AnimationName				= DUPhalanx_PNTC
				AnimationMode				= LOOP
			End
			FrameForPristineBonePositions = 42;44
			;//ParticleSysBone     = None MeleeDust
			BeginScript
;				CurDrawableShowSubObject("AXE02")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

	
		AnimationState        =  FIRING_OR_PREATTACK_A
	 	Animation = ATKA
			AnimationName		= DUPhalanx_ATKA
			AnimationMode		= LOOP
			UseWeaponTiming		= Yes	
		End
	 	Animation = ATKB
			AnimationName		= DUPhalanx_ATKD
			AnimationMode		= LOOP
			UseWeaponTiming		= Yes	
		End
	 	Animation = ATKC
			AnimationName		= DUPhalanx_ATKC
			AnimationMode		= LOOP
			UseWeaponTiming		= Yes	
		End			
			;//ParticleSysBone None MeleeDust
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End


		;;//-------------------- HIT REACTIONS --------------------------
		AnimationState = HIT_REACTION
			Animation						= HITA
				AnimationName				= DUPhalanx_HITA
				AnimationMode				= ONCE
			End
		End
		
		;;//------------ EMOTIONS ---------------------------------------

		;;//====== LEVELED
		AnimationState				= LEVELED 						; This state clears itself in 3 seconds
			Animation						= CHRA
				AnimationName				= DUPhalanx_CHRA
				AnimationMode				= LOOP
				AnimationPriority			= 5
			End						
			Animation						= CHRB
				AnimationName				= DUPhalanx_CHRB
				AnimationMode				= LOOP
				AnimationPriority			= 5
			End						
			Animation						= CHRC
				AnimationName				= DUPhalanx_CHRC
				AnimationMode				= LOOP
				AnimationPriority			= 1
			End	
		End

		;;//====== CELEBRATING
		AnimationState			= EMOTION_CELEBRATING
			Animation						= CHRA
				AnimationName				= DUPhalanx_CHRA
				AnimationMode				= LOOP
				AnimationPriority			= 5
			End						
			Animation						= CHRB
				AnimationName				= DUPhalanx_CHRB
				AnimationMode				= LOOP
				AnimationPriority			= 5
			End						
			Animation						= CHRC
				AnimationName				= DUPhalanx_CHRC
				AnimationMode				= LOOP
				AnimationPriority			= 1
			End	
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		;;//====== TAUNTING
		AnimationState			= EMOTION_TAUNTING

			Animation
				AnimationName			= DUPhalanx_TNTA
				AnimationMode			= LOOP
			End
			Animation
				AnimationName			= DUPhalanx_TNTB
				AnimationMode			= LOOP
			End
			Animation
				AnimationName			= DUPhalanx_TNTC
				AnimationMode			= LOOP
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		
		AnimationState					= EMOTION_ALERT
			Animation				= GUARD_STANCE
				AnimationName		= DUPhalanx_IDLA
				AnimationMode		= LOOP
			End
			BeginScript
;				CurDrawableHideSubObject("AXE02")
;//				Prev = CurDrawablePrevAnimationState()
;//				if Prev == "BORED"		then CurDrawableSetTransitionAnimState("Transition_BoredToReady") end
;//				if Prev == "SELECTED"	then CurDrawableSetTransitionAnimState("Transition_SelectedToReady") end
				if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
			EndScript

		End
		
		AnimationState			= RAISING_FLAG
			Animation						= CHRA
				AnimationName				= DUPhalanx_CHRA
				AnimationMode				= LOOP
				AnimationPriority			= 5
			End						
			Animation						= CHRB
				AnimationName				= DUPhalanx_CHRB
				AnimationMode				= LOOP
				AnimationPriority			= 5
			End						
			Animation						= CHRC
				AnimationName				= DUPhalanx_CHRC
				AnimationMode				= LOOP
				AnimationPriority			= 1
			End	
		End

		;;//------------------- SELECTED STATES -------------------------
		
		AnimationState				=	SELECTED
			StateName				=	AtAttentionIdle
			SimilarRestart			=   Yes			
			Animation           = ATNB
				AnimationName     = DUPhalanx_ATNB
				AnimationMode     = LOOP
			End
			BeginScript
;				CurDrawableHideSubObject("AXE02")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
			EndScript
		End
							
		;;//--------------- IDLE STATES ---------------------------------

		IdleAnimationState
			StateName				= STATE_Idle
            Animation				= IDLA
                AnimationName       = DUPhalanx_IDLA ;//default idle
				AnimationMode       = ONCE
				AnimationPriority   = 100 
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLB
				AnimationName       = DUPhalanx_IDLB ;//figet idle, similar to IDLA, should be used sparingly
				AnimationMode       = ONCE
				AnimationPriority   = 10
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLC
				AnimationName       = DUPhalanx_IDLC ;//bored idle --similar to IDLD but longer
				AnimationMode       = ONCE
				AnimationPriority   = 5
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End	
			BeginScript
;				CurDrawableHideSubObject("AXE02")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
				if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
			EndScript
		End

		
		;//---Transitions-------------------------------------

		TransitionState       = TRANS_SelectedToIdle	
			Animation			= ATNC
				AnimationName	= DUPhalanx_ATNC
				AnimationMode	= ONCE
				AnimationSpeedFactorRange = 0.8 1.0
			End
		End
		
		TransitionState				=	TRANS_Select
			Animation           = ATNA
				AnimationName     = DUPhalanx_ATNA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.8 1.0
				
			End
		End
	End
;;,;;
;	
;	;Draw module just for the HeroSelection
;	Draw = W3DScriptedModelDraw Icon
;		ModelConditionState = NONE
;			Model					= Icon02
;		End
;	End
;
;;,;;	
;;================== END ANIMATIONS =================================================================	

    #include "..\..\..\includes\StunDrawModuleSmall.inc"

	; ***DESIGN parameters ***
	Side = Fellowship
	EditorSorting = UNIT
	ThreatLevel = FARAMIR_THREAT_LEVEL
	TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
	BuildCost           = 1200 ;					
	BuildTime           = HERO_BUILDTIME_TIER_1 ;,; HERO_BUILDTIME_TIER_5 ;,; HERO_BUILDTIME_TIER_4 ; HERO_BUILDTIME_TIER_5 ;;,;; GIMLI_BUILDTIME	
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
	;//DisplayMeleeDamage = GIMLI_DAMAGE
	
	HeroSortOrder = 40
				
	WeaponSet
		Conditions				= None 
		Weapon					= PRIMARY  DwarvenDainAxe
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		AutoChooseSources		= TERTIARY NONE
		ShareWeaponReloadTime	= Yes
	End

	ArmorSet
		Conditions      = None
		Armor           = HeroArmor
		DamageFX        = NormalDamageFX
	End
	VisionRange = VISION_STANDARD_MELEE				
	ShroudClearingRange = SHROUD_CLEAR_HERO
	
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1.0%

	BountyValue = ROHAN_GIMLI_BOUNTY_VALUE
	DisplayName = OBJECT:DwarvenBifur
	RecruitText = CONTROLBAR:DwarvenBifurRecruit
	ReviveText	= CONTROLBAR:DwarvenBifurRevive
	Hotkey		= CONTROLBAR:DwarvenBifurHotkey
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
;  CrusherLevel = 1
	
	CommandSet  = DwarvenBifurCommandSet
	CommandPoints = 0 ;HERO_COMMAND_POINTS_TIER_1 ;,; HERO_COMMAND_POINTS_TIER_5 ;,; HERO_COMMAND_POINTS_TIER_4 ; HERO_COMMAND_POINTS_TIER_5 ;;,;; 75
	AutoResolveUnitType = AutoResolveUnit_Hero
	AutoResolveCombatChain = AutoResolve_HeroCombatChain
	AutoResolveBody = AutoResolve_BoromirBody
	AutoResolveArmor
		Armor = AutoResolve_BoromirArmor
	End
	AutoResolveWeapon
		Weapon = AutoResolve_BoromirWeapon
	End
	
	;AutoResolveLeadership = AutoResolve_GimliBonus


	; *** AUDIO Parameters ***;

	;VoiceAmbushed							= DainVoiceAmbushed	  OBSOLETE VOICE
	VoiceAttack								= DainVoiceAttack
	VoiceAttackCharge						= DainVoiceAttackCharge
	VoiceAttackMachine						= DainVoiceAttack
	VoiceAttackStructure					= DainVoiceAttack
	;VoiceCreated							= DainVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceFear 								= DainVoiceHelpMe
	VoiceGuard								= DainVoiceMove
	VoiceMove								= DainVoiceMove
	VoiceMoveToCamp							= DainVoiceMove
	VoiceMoveWhileAttacking					= DainVoiceDisengage
	VoicePriority							= 67
	VoiceRetreatToCastle					= DainVoiceRetreat
	VoiceSelect								= DainVoiceSelectMS
	VoiceSelectBattle 						= DainVoiceSelectBattle

	SoundImpact								= ImpactHorse

	CrowdResponseKey = DwarfHero

    #include "..\..\..\Includes\StandardUnitEvaEvents.inc"
    
	;EvaEventDieOwner = DainDie			;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		; Tie into LargeGroupAudio system
		Key = Humanoid_Male Dwarf Dwarf_Male Unit Infantry Hero
	End
	
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
;		AnimationSound = Sound: TauntHumanHitShield	Animation:GUMAArms_SKL.GUManMocap_IDLC	Frames: 17 27
		AnimationSound = Sound:BodyFallOrc			Animation:DUPHALANX_SKL.DUPHALANX_LNDA	Frames:6
		AnimationSound = Sound:BodyFallGeneric1		Animation:DUPHALANX_SKL.DUPHALANX_DIEA	Frames:13
		AnimationSound = Sound:BodyFallGeneric1		Animation:DUPHALANX_SKL.DUPHALANX_DIEB	Frames:45
		AnimationSound = Sound:BodyFallGeneric1		Animation:DUPHALANX_SKL.DUPHALANX_DIEC	Frames:22
	End

	; ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		; MaxUpdateRangeCap = 800
		; AnimationSound = Sound:FootstepDirtA			Animation:DUDain_SKL.DUDain_RUNA	Frames:3 14
		; AnimationSound = Sound:FootstepDirtA			Animation:DUDain_SKL.DUDain_RUNB	Frames:3 12
		; AnimationSound = Sound:BodyFallSoldier			Animation:DUDain_SKL.DUDain_LNDA	Frames:4
		; AnimationSound = Sound:BodyFallSoldier			Animation:DUDain_SKL.DUDain_DIEA	Frames:11
		; AnimationSound = Sound:BodyFallSoldier			Animation:DUDain_SKL.DUDain_DIEC	Frames:59
		; AnimationSound = Sound:BodyFallSoldier			Animation:DUDAIN_SKL.DUDAIN_DTHA	Frames:73
		; ;AnimationSound = Sound:AxeDropSoundHere!		Animation:DUDAIN_SKL.DUDAIN_DTHA	Frames:21		;axe falls
		; AnimationSound = Sound:SwordIntoGroundQuiet		Animation:DUDAIN_SKL.DUDAIN_IDLE	Frames:61		;striking ground with axe
		; AnimationSound = Sound:TauntHumanHitShield		Animation:DUDAIN_SKL.DUDAIN_SPCA	Frames:25 50	;hitting shield and sword 
		; AnimationSound = Sound:TauntHumanHitShield		Animation:DUDAIN_SKL.DUDAIN_TNTA	Frames:28 43	;hitting shield and sword 
	; End


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT HERO ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER
	PathfindDiameter = 40.0

	Body = RespawnBody ModuleTag_RespawnBody
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 2500 ;Dain_HEALTH  ;BALANCE Dain Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= 80%	
	End	

	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim				= DYING			;Model condition to play when killed-to-respawn
		DeathFX				= FX_GimliDieToRespawn	;FXList to play when killed-to-respawn
		DeathAnimationTime		= 4100			;How long DeathAnim will take.
		InitialSpawnFX			= FX_GimliInitialSpawn
		RespawnAnim				= LEVELED			;Animation to play when respawning.
		RespawnFX				= FX_GimliRespawn		;FXList to play when respawning.
		RespawnAnimationTime		= 2000			;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP	;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage				= hifili_res
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
;;,;;		RespawnRules =				AutoSpawn:No	Cost:3000		Time:90000		Health:100%	;;.;; Base respawn time 90s from 60s

		;RespawnRules =			AutoSpawn:No	Cost:3000		Time:HERO_RESPAWNTIME_TIER_5		Health:100%		;DEFAULT VALUES	;;,;; Version 2.1 Respawn Rules
		;,; RespawnRules =			AutoSpawn:No	Cost:2250		Time:HERO_RESPAWNTIME_TIER_4		Health:100%		;DEFAULT VALUES	;;,;; Version 2.4 Respawn Rules
		;,; RespawnRules =          AutoSpawn:No    Cost:2250       Time:HERO_RESPAWNTIME_TIER_5        Health:100%     ;,;
		RespawnRules =          AutoSpawn:No    Cost:2250       Time:HERO_RESPAWNTIME_TIER_4        Health:100% ;,; Added in v5.1
	End

	Behavior = AutoHealBehavior ModuleTag_GimliHealing
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End
  
	#include "..\..\..\includes\CaptureBuilding.inc"
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        = 500
		HoldGroundCloseRangeDistance = 60
	End	

	LocomotorSet
		Locomotor = RohanGimliLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_DWARF_HERO_SPEED
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		AllowBouncing = No
		ShockStunnedTimeLow		= 1400	;msec
		ShockStunnedTimeHigh	= 2400	;msec
		ShockStandingTime		= 2600	;msec
	End 
	
	; ;--------------------------------------------------------------------------------------------
	; ;//-------------------------Thror's Leadership----------------------------------------------
	; ;--------------------------------------------------------------------------------------------
	; Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DainLeadership
		; SpecialPowerTemplate	= SpecialAbilityFakeLeadership
		; TriggeredBy				= Upgrade_ObjectLevel1
	; End
	
	; Behavior = SpecialPowerModule ModuleTag_DainLeadershipUpdate   
		; SpecialPowerTemplate		= SpecialAbilityFakeLeadership
		; UpdateModuleStartsAttack	= No
		; StartsPaused				= Yes
	; End

	; Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
		; StartsActive	= No ;If no, requires upgrade to turn on.
		; BonusName		= ThrorLeadership
		; TriggeredBy		= Upgrade_ObjectLevel1
		; RefreshDelay	= 2000
		; Range			= 200
		; ObjectFilter	= AOTR_GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
	; End	
	

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL DainVoiceDie
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = SlowDeathBehavior ModuleTag_07
		DeathTypes = NONE +KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 8000
	End

	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 50  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 20
		FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit

; Note, this flag shouldn't be in here.  Death is caused by the intent of the thrower, not the ability of an object to land.
; Both a troll and Aragorn can throw Gimli.
; Actually, that means a lot of this is bad.  For two different throw behaviors you need two different modules I think.
;    DieOnImpact = Yes

		BounceCount = 0   ; When I hit the ground, I'll arc again

		FinalStuckTime = 1200 ; Can't move for this long afterwards

		GroundHitFX       = FX_GimliLeapLand
		GroundHitWeapon   = RohanGimliLeapWarhead
		PreLandingStateTime = 75; Look ahead to the end of the arc, and get the ABOUT_TO_HIT flag this far in advance
	End
	
    Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	300		; max distance to taunted/pointed objet
 		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
 		
		AddEmotion			=	Doom_Base
		//	AddEmotion			=   BraceForBeingCrushed_Base
		//	AddEmotion			=	FearIdle_Base
		//	AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		//	AddEmotion			=	HeroCheerIdle_Base
		//	AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
		AddEmotion			=	CheerForAboutToCrush_Base
 	End	
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2200 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 1.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 2500.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 5000.0  ; level 3 (heavy  damage) threshold trigger
	End

	Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
		StartsActive				= No
		TriggeredBy					= Upgrade_ElvenGift
		HealingAmount				= ELVEN_GIFT_REGEN_AMOUNT
		HealingDelay				= ELVEN_GIFT_REGEN_DELAY
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
	
	Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
		TriggeredBy = Upgrade_ElvenGift
		AttributeModifier = SpellBookElvenGifts
	End
	
	;///////////////////
	; AISpecialPowers
	;///////////////////
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive ;;,;; Changed for 3.0.1
		CommandButtonName = Command_AttackMove ;;,;; Command_SetStanceAggressive ;;,;; Changed for 3.0.1
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End
	
	
	Geometry = CYLINDER
	GeometryMajorRadius = 5.6
	GeometryMinorRadius = 5.6
	GeometryHeight = 16.0
	GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End