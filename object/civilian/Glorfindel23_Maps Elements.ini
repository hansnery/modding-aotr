;_________________________________; NOTE ;_________________________________;

;(Mur)        WallBoundsMesh = 
;(Escalier)        RampMesh2 = 

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; NEUTRAL ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;-----------------------------------------------------------------------------
;(Decorative Element);
Object BlackDoor_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

   DefaultModelConditionState
   Model = Gb23BlackDoor
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
End

;-----------------------------------------------------------------------------
Object InvisiblePlatform
  
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
        WallBoundsMesh = P1
    DefaultModelConditionState
      Model = MBCUWALLG
    End
  End

  ; *** AUDIO Parameters *** 
 
  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:CirithUngol
  Side                = Civilian
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0

 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = NOT_ON_RADAR
  
  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE WALK_ON_TOP_OF_WALL STRUCTURE
  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
  MaxHealth       = 99999.0
  End

    Behavior = SubObjectsUpgrade ModelUpdate_Glorfindel23
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = P1 MBCUWALLG
    End

  Geometry              = BOX
  GeometryMajorRadius   = 35.0
  GeometryMinorRadius   = 30.0
  GeometryHeight        = 160.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End
;-----------------------------------------------------------------------------

Object PlotNoGeometry

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = OSBruinPl01
			End

		End

	; *** AUDIO Parameters ***

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Ruins
  Side                = Civilian
  EditorSorting   = STRUCTURE
  ThreatLevel = 1.0
		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

	; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS 
		RadarPriority = STRUCTURE
End
;-----------------------------------------------------------------------------

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; GONDOR ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;------------------------------------------; Minas Tirith ;------------------------------------------;

Object GondorSmallDoor

  ; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes

		DefaultModelConditionState
			Model = GBMBridgeDr2
		End

		ModelConditionState = DAMAGED
			Model			= GBMBridgeDr2_D1
		End
		AnimationState = DAMAGED
		End

		ModelConditionState = REALLYDAMAGED
			Model			= GBMBridgeDr2_D2
		End

		ModelConditionState = RUBBLE
			Model			= GBMBridgeDr2_D3
			ParticleSysBone = smokeBone Explosion5 FollowBone:Yes
			ParticleSysBone = smokeBone TrebuchetImpactDebris FollowBone:Yes  
		End
		AnimationState = RUBBLE
			Animation				=	Death
				AnimationName		=	GBWorkshop_D3SK.GBWorkshop_D3AN
				AnimationMode		=	ONCE
			End
		End      

		IdleAnimationState	
			Animation           = DoingNothing
				AnimationName     = GBMBridgeDr2.GBMBridgeDr2
				AnimationMode     = MANUAL
			End
		End

		AnimationState = DOOR_1_OPENING
			StateName = STATE_Open   
			Animation = Open 
				AnimationName	=	GBMBridgeDr2.GBMBridgeDr2
				AnimationMode	=	ONCE 
				AnimationBlendTime = 0
			End
			Flags = START_FRAME_LAST
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
			EndScript
		End

		TransitionState = TRANS_Closed_To_Open
			Animation = Open 
				AnimationName	=	GBMBridgeDr2.GBMBridgeDr2
				AnimationMode	=	ONCE 
			End
		End

		AnimationState = DOOR_1_CLOSING 
			StateName = STATE_Closed 
				Animation = Close 
				AnimationName	=	GBMBridgeDr2.GBMBridgeDr2
				AnimationMode	=	ONCE_BACKWARDS 
				AnimationBlendTime = 0
			End
			Flags = START_FRAME_FIRST
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
			EndScript
		End
		
		TransitionState = TRANS_Open_To_Closed
			Animation = Open 
				AnimationName	=	GBMBridgeDr2.GBMBridgeDr2
				AnimationMode	=	ONCE_BACKWARDS 
			End
			Flags = START_FRAME_LAST
		End		

	End
  

  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:MTDoor
  EditorSorting   = STRUCTURE

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE IGNORE_FOR_VICTORY NOT_AUTOACQUIRABLE
  RadarPriority = STRUCTURE
  Side                = Civilian
  KeepSelectableWhenDead    = Yes

  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 1000.0
  End

	CommandSet = CastleGateCommandSet

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 5000;must be longer than animation to avoid ->pop<-
		OpenByDefault = No
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 9500
		TimeBeforePlayingClosedSound = 9500
	End

	Geometry              = BOX
	GeometryMajorRadius   = 6.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 56.0
	GeometryName          = Closed
	GeometryIsSmall       = No
  
  
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 14.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 62.0    
    GeometryOffset          = X:8 Y:29 Z:0
    GeometryName          = OpenLeft
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 14.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 62.0    
    GeometryOffset          = X:8 Y:-29 Z:0
    GeometryName          = OpenRight
    
    GeometryContactPoint = X:15 Y:-29 Z:0 Ram 
    GeometryContactPoint = X:7 Y:-29 Z:60
    GeometryContactPoint = X:0  Y:-29 Z:0
    GeometryContactPoint = X:0  Y:-14 Z:60
    GeometryContactPoint = X:0  Y:  0 Z:1 Ram
    GeometryContactPoint = X:0  Y: 14 Z:60
    GeometryContactPoint = X:0  Y: 29 Z:0
    GeometryContactPoint = X:7 Y: 29 Z:60
    GeometryContactPoint = X:15 Y: 29 Z:0 Ram  

    Shadow                = SHADOW_VOLUME
End
;-----------------------------------------------------------------------------

Object MinasTirithCitadelTop_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

   DefaultModelConditionState
   Model = Gb23MMCitadel
   End
End


  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleBaseKeep
  Side                = Men
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Tirith STRUCTURE
End
;-----------------------------------------------------------------------------

Object GondorStatue_SubMod
	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = GPHealstue
			End
		
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = GPHealstue
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GPHealstue
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = GPHealstue
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End
  

  
	Geometry              = BOX
	GeometryMajorRadius   = 14.40
	GeometryMinorRadius   = 10.0
	GeometryHeight        = 19.2
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:0  Y:-24  Z:0 Grab
	GeometryContactPoint = X:-12  Y:-10  Z:50 
	GeometryContactPoint = X:-28  Y:0  Z:0 Grab
	GeometryContactPoint = X:-12  Y:10  Z:50 
	GeometryContactPoint = X:0  Y:24  Z:0 Grab
	GeometryContactPoint = X:12  Y:10  Z:95 
	GeometryContactPoint = X:28  Y:0  Z:0 Grab
	GeometryContactPoint = X:12  Y:-10  Z:95 
End
;------------------------------------------------------------------------------

Object GondorStatueMT_SubMod
	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = Gu23StatueMT
			End
		
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = Gu23StatueMT
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = Gu23StatueMT
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = Gu23StatueMT
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End
  

  
	Geometry              = BOX
	GeometryMajorRadius   = 14.40
	GeometryMinorRadius   = 10.0
	GeometryHeight        = 19.2
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:0  Y:-24  Z:0 Grab
	GeometryContactPoint = X:-12  Y:-10  Z:50 
	GeometryContactPoint = X:-28  Y:0  Z:0 Grab
	GeometryContactPoint = X:-12  Y:10  Z:50 
	GeometryContactPoint = X:0  Y:24  Z:0 Grab
	GeometryContactPoint = X:12  Y:10  Z:95 
	GeometryContactPoint = X:28  Y:0  Z:0 Grab
	GeometryContactPoint = X:12  Y:-10  Z:95 
End
;------------------------------------------------------------------------------

Object GondorBuilding01_SubMod

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = Gu23Building01
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = Gu23Building01
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = Gu23Building01
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = Gu23Building01
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

  

  
  		Geometry              = BOX
		GeometryMajorRadius   = 1.0
		GeometryMinorRadius   = 0.8
		GeometryHeight        = 48.8
		GeometryIsSmall       = No
		;GeometryRotationAnchorOffset = X:1037.871 Y:0
		Shadow                = SHADOW_VOLUME
	End
;------------------------------------------------------------------------------

Object GondorBuilding02_SubMod

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = Gu23Building02
			End
		
		;    WallBoundsMesh = GBMTWallAPTop
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = Gu23Building02
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = Gu23Building02
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = Gu23Building02
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End

	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0

			GrabObject = EntThrownBuildingRock
			GrabFX = FX_WallGrab
			GrabOffset = X:16 Y:0  			

		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End

	Geometry              = BOX
	GeometryMajorRadius   = 24.40
	GeometryMinorRadius   = 20.0
	GeometryHeight        = 99.2
	GeometryIsSmall       = No
	;GeometryRotationAnchorOffset = X:1037.871 Y:0
	Shadow                = SHADOW_VOLUME
	
	GeometryContactPoint = X:0  Y:-24  Z:0 Grab
	GeometryContactPoint = X:-12  Y:-10  Z:50 
	GeometryContactPoint = X:-28  Y:0  Z:0 Grab
	GeometryContactPoint = X:-12  Y:10  Z:50 
	GeometryContactPoint = X:0  Y:24  Z:0 Grab
	GeometryContactPoint = X:12  Y:10  Z:95 
	GeometryContactPoint = X:28  Y:0  Z:0 Grab
	GeometryContactPoint = X:12  Y:-10  Z:95 
End
;------------------------------------------------------------------------------

Object GondorBuilding03_SubMod

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = Gu23Arch_MT
			End
		End

	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0

			GrabObject = EntThrownBuildingRock
			GrabFX = FX_WallGrab
			GrabOffset = X:16 Y:0  			

		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End

;	Geometry              = BOX
;	GeometryMajorRadius   = 10.40
;	GeometryMinorRadius   = 10.0
;	GeometryHeight        = 10.2
;	GeometryIsSmall       = No
;	Shadow                = SHADOW_VOLUME
	
End
;------------------------------------------------------------------------------

Object GondorBuilding04_SubMod

	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = Gu23Arch3_MT
			End
		End

	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS SELECTABLE MADE_OF_STONE NOT_AUTOACQUIRABLE CHUNK_VENDOR
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0

			GrabObject = EntThrownBuildingRock
			GrabFX = FX_WallGrab
			GrabOffset = X:16 Y:0  			

		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 4000
		End

;	Geometry              = BOX
;	GeometryMajorRadius   = 10.40
;	GeometryMinorRadius   = 10.0
;	GeometryHeight        = 10.2
;	GeometryIsSmall       = No
;	Shadow                = SHADOW_VOLUME
	
End
;------------------------------------------------------------------------------

Object GondorDecorativeFortress_SubMod
	SelectPortrait = BPGOsgiliath

	; *** ART Parameters ***
		Draw = W3DScriptedModelDraw ModuleTag_01
			OkToChangeModelColor = Yes
			
			StaticModelLODMode = yes
			
			DefaultModelConditionState
				Model = GBFortress
			End
		
		
		; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = GBFortress
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
	
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = GBFortress
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
	
    End
    
    ModelConditionState  = RUBBLE
      Model         = GBFortress
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    ModelConditionState  = POST_RUBBLE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
      Model         = None
      ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    

		End


	; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


	; ***DESIGN parameters ***

		DisplayName      = OBJECT:Ruins
		EditorSorting   = STRUCTURE

		ArmorSet
			Conditions        = None
			Armor             = NoArmor
			DamageFX          = None
		End

; *** ENGINEERING Parameters ***  
		KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS 
		RadarPriority = STRUCTURE
		Body                  = ActiveBody ModuleTag_03
			MaxHealth				= 2000.0
			MaxHealthDamaged  		= 1500.0
			MaxHealthReallyDamaged 	= 1000.0
		End

		; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
		; never truly destroyed, even when reduced to zero health. Also note that garrisonable
		; buildings automatically stick around because GarrisonContain has it's own DieModule
		Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
		End

  Behavior                  = StructureCollapseUpdate ModuleTag_04
    MinCollapseDelay        = 000
    MaxCollapseDelay        = 000
    CollapseDamping         = .5
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    FXList                  = INITIAL   FX_StructureMediumCollapse
    OCL						= INITIAL	OCL_StructureRubblePileLarge ; creates a rising pile of debris halfway-done

  End
  

    GeometryIsSmall       = No
    Geometry              = BOX                        // Main body
    GeometryMajorRadius   = 49
    GeometryMinorRadius   = 49
    GeometryHeight        = 50
    
    AdditionalGeometry    = BOX                        // 4 towers
    GeometryMajorRadius    = 12.0
    GeometryMinorRadius    = 12.0
    GeometryHeight        = 100.0
    GeometryOffset        = X:-40 Y:-40 Z:0
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius    = 12.0
    GeometryMinorRadius    = 12.0
    GeometryHeight        = 100.0
    GeometryOffset        = X:-40 Y:40 Z:0
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius    = 12.0
    GeometryMinorRadius    = 12.0
    GeometryHeight        = 100.0
    GeometryOffset        = X:40 Y:-40 Z:0    
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius    = 12.0
    GeometryMinorRadius    = 12.0
    GeometryHeight        = 100.0
    GeometryOffset        = X:40 Y:40 Z:0
    
    AdditionalGeometry        = BOX
    GeometryName            = HighTowerGeom
    GeometryMajorRadius       = 12
    GeometryMinorRadius       = 12
    GeometryHeight            = 175
    GeometryOffset            = X:0 Y:0 Z:0
    GeometryUsedForHealthBox = No
    
    GeometryContactPoint = X:-57        Y:57        Z:0            Repair
    GeometryContactPoint = X:57            Y:-57        Z:0            Repair
    GeometryContactPoint = X:49            Y:36.435    Z:0
    GeometryContactPoint = X:-32.763    Y:-46.121    Z:0
    GeometryContactPoint = X:0            Y:0            Z:180        Swoop
    
    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
End
;------------------------------------------------------------------------------

;------------------------------------------; Cair Andros ;------------------------------------------;

;-----------------------------------------------------------------------------

Object CairAndrosCitadel_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

   DefaultModelConditionState
   Model = Gb23CAcitadel
   End
End


  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorCastleBaseKeep
  Side                = Men
  EditorSorting       = STRUCTURE
End
;-----------------------------------------------------------------------------

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; MORDOR ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;------------------------------------------; Minas Morgul ;------------------------------------------;

Object MinasMorgulTower01_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = MM23Tower01
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulWall01_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = MM23Wall01
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulWallGate_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

        WallBoundsMesh = P2
        RampMesh2 = P3	

        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = MM23WallGate
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulWallGate02_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = MM23WallGate02
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulWallGate03_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = MM23WallGate03
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulPrison_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Prison
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulWallSmall_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23WallSmall
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE

    Geometry              = BOX
    GeometryMajorRadius   = 5.0        ;10.0 
    GeometryMinorRadius   = 20.0
    GeometryHeight        = 40.0    ;47
    GeometryIsSmall       = No
      
    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
End
;-----------------------------------------------------------------------------

Object MinasMorgulWallSmall02_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23WallSmall02
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE

    Geometry              = BOX
    GeometryMajorRadius   = 5.0        ;10.0 
    GeometryMinorRadius   = 20.0
    GeometryHeight        = 40.0    ;47
    GeometryIsSmall       = No
      
    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
End
;-----------------------------------------------------------------------------

Object MinasMorgulCage01_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Cage01
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulCage02_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Cage02
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulCage03_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Cage03
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulCage04_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Cage04
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulCage05_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Cage05
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulCage06_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Cage06
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulCage07_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Cage07
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulCage08_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Cage08
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulSmallDoor_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23SmallDoor
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulStairs01_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

   DefaultModelConditionState
   Model = MM23Stairs01
   End
;    WallBoundsMesh = P1
     RampMesh1 = P1
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = None
  End
    

    ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY UNATTACKABLE DONT_HIDE_IF_FOGGED
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = DefaultWallArmorBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

     Geometry              = BOX
     GeometryMajorRadius   = 50.0
     GeometryMinorRadius   = 50.0
     GeometryHeight        = 35.0
    
    GeometryContactPoint =    X:-50            Y:-40                Z:0 Grab
    GeometryContactPoint =    X:0                Y:-40                Z:40 Grab
    GeometryContactPoint =    X:50            Y:-40                Z:0 Grab
    GeometryContactPoint =    X:-50            Y:40                Z:0 Grab
    GeometryContactPoint =    X:0                Y:40                Z:40 Grab
    GeometryContactPoint =    X:50            Y:40                Z:0 Grab
    
    GeometryIsSmall                    = No
    Shadow                            = SHADOW_VOLUME
End
;-----------------------------------------------------------------------------

Object MinasMorgulStairs02_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

        RampMesh1 = P1	

   DefaultModelConditionState
   Model = MM23Stairs02
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = None
  End
    

    ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY UNATTACKABLE DONT_HIDE_IF_FOGGED
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = DefaultWallArmorBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

     Geometry              = BOX
     GeometryMajorRadius   = 50.0
     GeometryMinorRadius   = 50.0
     GeometryHeight        = 35.0
    
    GeometryContactPoint =    X:-50            Y:-40                Z:0 Grab
    GeometryContactPoint =    X:0                Y:-40                Z:40 Grab
    GeometryContactPoint =    X:50            Y:-40                Z:0 Grab
    GeometryContactPoint =    X:-50            Y:40                Z:0 Grab
    GeometryContactPoint =    X:0                Y:40                Z:40 Grab
    GeometryContactPoint =    X:50            Y:40                Z:0 Grab
    
    GeometryIsSmall                    = No
    Shadow                            = SHADOW_VOLUME
End
;-----------------------------------------------------------------------------

Object MinasMorgulStairs03_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

        RampMesh1 = P1	

   DefaultModelConditionState
   Model = MM23Stairs03
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = None
  End
    

    ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY UNATTACKABLE DONT_HIDE_IF_FOGGED
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = DefaultWallArmorBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

     Geometry              = BOX
     GeometryMajorRadius   = 50.0
     GeometryMinorRadius   = 50.0
     GeometryHeight        = 35.0
    
    GeometryContactPoint =    X:-50            Y:-40                Z:0 Grab
    GeometryContactPoint =    X:0                Y:-40                Z:40 Grab
    GeometryContactPoint =    X:50            Y:-40                Z:0 Grab
    GeometryContactPoint =    X:-50            Y:40                Z:0 Grab
    GeometryContactPoint =    X:0                Y:40                Z:40 Grab
    GeometryContactPoint =    X:50            Y:40                Z:0 Grab
    
    GeometryIsSmall                    = No
    Shadow                            = SHADOW_VOLUME
End
;------------------------------------------------------------------------------ 

Object MinasMorgulWallAngle_SubMod

;    SelectPortrait = BPRHelmsDeep
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = MBMMWallAT    
    End

     
    ;-------Damaged------------
        ModelConditionState  = DAMAGED
            Model         = MBMMWallAT
            Texture = MinasMorgul1.tga MinasMorgul1_D2.tga 
        End
        AnimationState = DAMAGED
        End        
        
        ModelConditionState  = REALLYDAMAGED
            Model         = MBMMWallAT_D2
        End
        
        AnimationState = REALLYDAMAGED
            EnteringStateFX    = FX_BuildingReallyDamaged
            Animation                =    RubbleAnimation
                AnimationName        =    MBMMWallAT_D2.MBMMWallAT_D2
                AnimationMode        =    ONCE
              End
        End
 
         ModelConditionState  = RUBBLE
            Model         = MBMMWallAT_D3
        End
        
        AnimationState = RUBBLE
              Animation                =    RubbleAnimation
                AnimationName        =    MBMMWallAT_D3.MBMMWallAT_D3
                AnimationMode        =    ONCE
              End
        End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prop
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = 500
  BuildTime           = 15.0           ; in seconds
  VisionRange         = 160.0          ; Shroud clearing distance
  ShroudClearingRange = 160

;  CommandSet          = GondorBarracksCommandSet
 
  ; *** AUDIO Parameters ***

    #include "..\Includes\StandardBuildingEvaEvents.inc"

    SoundOnDamaged                = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

    ; *** ENGINEERING Parameters ***

    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE  WALK_ON_TOP_OF_WALL IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP DONT_HIDE_IF_FOGGED

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 1000.0
        MaxHealthDamaged        = 700.0
        MaxHealthReallyDamaged  = 300.0
    End

    ArmorSet
        Conditions        = None
        Armor             = DefaultWallArmor
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06
        ; nothing
    End
  
    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End
  
    AttackContactPoint = X:-24 Y:-24 Z:92

    AttackContactPoint = X:164 Y:0 Z:128 Swoop

End
;-----------------------------------------------------------------------------

Object MinasMorgulStatue_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

   DefaultModelConditionState
   Model = MM23Statue
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;-----------------------------------------------------------------------------

Object MinasMorgulMetalPics_SubMod

    SelectPortrait = BRKatakomben
 
  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    
    DefaultModelConditionState
       Model = MM23MetalPics
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
End
;------------------------------------------------------------------------------

Object MinasMorgulDoor_Submod

  ; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes

RandomTexture = minasmorgul1_festung.tga 0 minasmorgul1.tga

		DefaultModelConditionState
			Model = MM23Gate
		End

		ModelConditionState = DAMAGED
			Model			= MM23Gate
		End
		AnimationState = DAMAGED
		End

		ModelConditionState = REALLYDAMAGED
			Model			= MM23Gate
		End

		ModelConditionState = RUBBLE
			Model			= MM23Gate
			ParticleSysBone = smokeBone Explosion5 FollowBone:Yes
			ParticleSysBone = smokeBone TrebuchetImpactDebris FollowBone:Yes  
		End
		AnimationState = RUBBLE
			Animation				=	Death
				AnimationName		=	GBWorkshop_D3SK.GBWorkshop_D3AN
				AnimationMode		=	ONCE
			End
		End      

		IdleAnimationState	
			Animation           = DoingNothing
				AnimationName     = MM23Gate.MM23Gate
				AnimationMode     = MANUAL
			End
		End

		AnimationState = DOOR_1_OPENING
			StateName = STATE_Open   
			Animation = Open 
				AnimationName	=	MM23Gate.MM23Gate
				AnimationMode	=	ONCE 
				AnimationBlendTime = 0
			End
			Flags = START_FRAME_LAST
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
			EndScript
		End

		TransitionState = TRANS_Closed_To_Open
			Animation = Open 
				AnimationName	=	MM23Gate.MM23Gate
				AnimationMode	=	ONCE 
			End
		End

		AnimationState = DOOR_1_CLOSING 
			StateName = STATE_Closed 
				Animation = Close 
				AnimationName	=	MM23Gate.MM23Gate
				AnimationMode	=	ONCE_BACKWARDS 
				AnimationBlendTime = 0
			End
			Flags = START_FRAME_FIRST
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
			EndScript
		End
		
		TransitionState = TRANS_Open_To_Closed
			Animation = Open 
				AnimationName	=	MM23Gate.MM23Gate
				AnimationMode	=	ONCE_BACKWARDS 
			End
			Flags = START_FRAME_LAST
		End		

	End
  

  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:MTDoor
  EditorSorting   = STRUCTURE

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE IGNORE_FOR_VICTORY NOT_AUTOACQUIRABLE
  RadarPriority = STRUCTURE
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
  KeepSelectableWhenDead    = Yes

  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 1000.0
  End

	CommandSet = CastleGateCommandSet

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 5000;must be longer than animation to avoid ->pop<-
		OpenByDefault = No
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 9500
		TimeBeforePlayingClosedSound = 9500
	End

	Geometry              = BOX
	GeometryMajorRadius   = 6.0
	GeometryMinorRadius   = 50.0
	GeometryHeight        = 56.0
	GeometryName          = Closed
	GeometryIsSmall       = No
  
  
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 14.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 62.0    
    GeometryOffset          = X:8 Y:29 Z:0
    GeometryName          = OpenLeft
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 14.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 62.0    
    GeometryOffset          = X:8 Y:-29 Z:0
    GeometryName          = OpenRight
    
    GeometryContactPoint = X:15 Y:-29 Z:0 Ram 
    GeometryContactPoint = X:7 Y:-29 Z:60
    GeometryContactPoint = X:0  Y:-29 Z:0
    GeometryContactPoint = X:0  Y:-14 Z:60
    GeometryContactPoint = X:0  Y:  0 Z:1 Ram
    GeometryContactPoint = X:0  Y: 14 Z:60
    GeometryContactPoint = X:0  Y: 29 Z:0
    GeometryContactPoint = X:7 Y: 29 Z:60
    GeometryContactPoint = X:15 Y: 29 Z:0 Ram  

    Shadow                = SHADOW_VOLUME
End
;-----------------------------------------------------------------------------

Object MinasMorgulGridDoor_Submod

  ; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes

		DefaultModelConditionState
			Model = MM23GridDoor
		End

		ModelConditionState = DAMAGED
			Model			= MM23GridDoor
		End
		AnimationState = DAMAGED
		End

		ModelConditionState = REALLYDAMAGED
			Model			= MM23GridDoor
		End

		ModelConditionState = RUBBLE
			Model			= MM23GridDoor
			ParticleSysBone = smokeBone Explosion5 FollowBone:Yes
			ParticleSysBone = smokeBone TrebuchetImpactDebris FollowBone:Yes  
		End
		AnimationState = RUBBLE
			Animation				=	Death
				AnimationName		=	GBWorkshop_D3SK.GBWorkshop_D3AN
				AnimationMode		=	ONCE
			End
		End      

		IdleAnimationState	
			Animation           = DoingNothing
				AnimationName     = MM23GridDoor.MM23GridDoor
				AnimationMode     = MANUAL
			End
		End

		AnimationState = DOOR_1_OPENING
			StateName = STATE_Open   
			Animation = Open 
				AnimationName	=	MM23GridDoor.MM23GridDoor
				AnimationMode	=	ONCE 
				AnimationBlendTime = 0
			End
			Flags = START_FRAME_LAST
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
			EndScript
		End

		TransitionState = TRANS_Closed_To_Open
			Animation = Open 
				AnimationName	=	MM23GridDoor.MM23GridDoor
				AnimationMode	=	ONCE 
			End
		End

		AnimationState = DOOR_1_CLOSING 
			StateName = STATE_Closed 
				Animation = Close 
				AnimationName	=	MM23GridDoor.MM23GridDoor
				AnimationMode	=	ONCE_BACKWARDS 
				AnimationBlendTime = 0
			End
			Flags = START_FRAME_FIRST
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
			EndScript
		End
		
		TransitionState = TRANS_Open_To_Closed
			Animation = Open 
				AnimationName	=	MM23GridDoor.MM23GridDoor
				AnimationMode	=	ONCE_BACKWARDS 
			End
			Flags = START_FRAME_LAST
		End		

	End
  

  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:MTDoor
  EditorSorting   = STRUCTURE

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE IGNORE_FOR_VICTORY NOT_AUTOACQUIRABLE
  RadarPriority = STRUCTURE
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE
  KeepSelectableWhenDead    = Yes

  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 1000.0
  End

	CommandSet = CastleGateCommandSet

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 5000;must be longer than animation to avoid ->pop<-
		OpenByDefault = No
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 9500
		TimeBeforePlayingClosedSound = 9500
	End

	Geometry              = BOX
	GeometryMajorRadius   = 1.0
	GeometryMinorRadius   = 62.0
	GeometryHeight        = 64.0
	GeometryName          = Closed	
	GeometryOffset		  = X:-5.0 Y:0.0 Z: 0.0
	GeometryIsSmall       = No

	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 17.0
	GeometryMinorRadius   = 10.0
	GeometryHeight        = 60.0	
	GeometryOffset		  = X:10 Y:45 Z:0
	GeometryName          = OpenLeft
	
	AdditionalGeometry    = BOX
	GeometryMajorRadius   = 17.0
	GeometryMinorRadius   = 10.0
	GeometryHeight        = 60.0	
	GeometryOffset		  = X:10 Y:-45 Z:0
	GeometryName          = OpenRight
	
	GeometryContactPoint =	X:23	Y:-39	Z:0 Ram
	GeometryContactPoint =	X:12	Y:-45	Z:60
	GeometryContactPoint =	X:0		Y:-50	Z:0
	GeometryContactPoint =	X:0		Y:-25	Z:60
	GeometryContactPoint =	X:0		Y:0		Z:0 Ram
	GeometryContactPoint =	X:0		Y:25	Z:60
	GeometryContactPoint =	X:0		Y:50	Z:0
	GeometryContactPoint =	X:12	Y:45	Z:60
	GeometryContactPoint =	X:23	Y:39	Z:0 Ram
	

	Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------------------------

Object MinasMorgulGridDoor02_Submod

  ; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_01
		OkToChangeModelColor = Yes

		DefaultModelConditionState
			Model = MM23GridDoor02
		End

		ModelConditionState = DAMAGED
			Model			= MM23GridDoor02
		End
		AnimationState = DAMAGED
		End

		ModelConditionState = REALLYDAMAGED
			Model			= MM23GridDoor02
		End

		ModelConditionState = RUBBLE
			Model			= MM23GridDoor02
			ParticleSysBone = smokeBone Explosion5 FollowBone:Yes
			ParticleSysBone = smokeBone TrebuchetImpactDebris FollowBone:Yes  
		End
		AnimationState = RUBBLE
			Animation				=	Death
				AnimationName		=	GBWorkshop_D3SK.GBWorkshop_D3AN
				AnimationMode		=	ONCE
			End
		End      

		IdleAnimationState	
			Animation           = DoingNothing
				AnimationName     = MM23GridDoor02.MM23GridDoor02
				AnimationMode     = MANUAL
			End
		End

		AnimationState = DOOR_1_OPENING
			StateName = STATE_Open   
			Animation = Open 
				AnimationName	=	MM23GridDoor02.MM23GridDoor02
				AnimationMode	=	ONCE 
				AnimationBlendTime = 0
			End
			Flags = START_FRAME_LAST
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
			EndScript
		End

		TransitionState = TRANS_Closed_To_Open
			Animation = Open 
				AnimationName	=	MM23GridDoor02.MM23GridDoor02
				AnimationMode	=	ONCE 
			End
		End

		AnimationState = DOOR_1_CLOSING 
			StateName = STATE_Closed 
				Animation = Close 
				AnimationName	=	MM23GridDoor02.MM23GridDoor02
				AnimationMode	=	ONCE_BACKWARDS 
				AnimationBlendTime = 0
			End
			Flags = START_FRAME_FIRST
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
			EndScript
		End
		
		TransitionState = TRANS_Open_To_Closed
			Animation = Open 
				AnimationName	=	MM23GridDoor02.MM23GridDoor02
				AnimationMode	=	ONCE_BACKWARDS 
			End
			Flags = START_FRAME_LAST
		End		

	End
  

  ; *** AUDIO Parameters ***

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:MTDoor
  EditorSorting   = STRUCTURE

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = None
  End

  ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE SELECTABLE IMMOBILE IGNORE_FOR_VICTORY NOT_AUTOACQUIRABLE
  RadarPriority = STRUCTURE
  Side                = Civilian
  EditorSorting       = STRUCTURE
  Browser = REGION Minas_Morgul STRUCTURE

  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 1000.0
  End

	CommandSet = CastleGateCommandSet

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End

	Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
		ResetTimeInMilliseconds = 5000;must be longer than animation to avoid ->pop<-
		OpenByDefault = No
		PercentOpenForPathing = 50
		SoundOpeningGateLoop = GateOpenStart
		SoundClosingGateLoop = GateCloseStart
		SoundFinishedOpeningGate = GateOpenEnd
		SoundFinishedClosingGate = GateCloseEnd
		TimeBeforePlayingOpenSound = 9500
		TimeBeforePlayingClosedSound = 9500
	End

    Geometry              = BOX
    GeometryMajorRadius   = 12.0
    GeometryMinorRadius   = 112.5
    GeometryHeight        = 70.0
    GeometryOffset          = X:20.75 Y:0 Z:0
    GeometryName          = Closed
    GeometryIsSmall       = No
    
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 56.0
    GeometryMinorRadius   = 12.0
    GeometryHeight        = 70.0    
    GeometryOffset          = X:72 Y:-110 Z:0
    GeometryName          = OpenLeft
    
    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 56.0
    GeometryMinorRadius   = 12.0
    GeometryHeight        = 70.0    
    GeometryOffset          = X:72 Y:110 Z:0
    GeometryName          = OpenRight
    
    GeometryContactPoint = X:36        Y:-72    Z:0 Ram
    GeometryContactPoint = X:18        Y:-72    Z:59
    GeometryContactPoint = X:0        Y:-72    Z:0
    GeometryContactPoint = X:0        Y:-36    Z:59
    GeometryContactPoint = X:0        Y:0        Z:0 Ram
    GeometryContactPoint = X:0        Y:36    Z:59
    GeometryContactPoint = X:0        Y:72    Z:0
    GeometryContactPoint = X:18        Y:72    Z:59
    GeometryContactPoint = X:36        Y:72    Z:0 Ram

    Shadow                = SHADOW_VOLUME
End
;------------------------------------------------------------------------------

;------------------------------------------; Barad Dur ;------------------------------------------;
;------------------------------------------------------------------------------

Object BaradDurWallGate_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

;        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = Bd23WallGate
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
End
;-----------------------------------------------------------------------------

Object BaradDurBridgePass_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

;        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = Bd23BridgePass
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
End
;-----------------------------------------------------------------------------

Object BaradDurLavaPass_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

;        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = Bd23LavaPass
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
End
;-----------------------------------------------------------------------------

Object BaradDurWallAngle_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes	

;        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = Bd23Angle
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
End
;-----------------------------------------------------------------------------

Object BaradDurWall01_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

        WallBoundsMesh = P1	

;        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = Bd23Wall01
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  
  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE WALK_ON_TOP_OF_WALL
  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
  MaxHealth       = 99999.0
  End

  Geometry              = BOX
  GeometryMajorRadius   = 40.0
  GeometryMinorRadius   = 114.4
  GeometryHeight        = 54.0
  GeometryIsSmall       = No
  GeometryOffset        = X:-24 Y:0 Z:0
  GeometryRotationAnchorOffset = X:1076.832 Y:0.0
  GeometryContactPoint    = X: 30 Y: 40 Z:0 Grab
  GeometryContactPoint    = X:-65 Y: 40 Z:0 Grab
  GeometryContactPoint    = X: 30 Y:-40 Z:0 Grab
  GeometryContactPoint    = X:-65 Y:-40 Z:0 Grab
  GeometryContactPoint    = X: 10 Y:  0 Z:60
  
  Shadow                = SHADOW_VOLUME
End
;-----------------------------------------------------------------------------

Object BaradDurWall02_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

        WallBoundsMesh = P1	

;        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = Bd23Wall02
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  
  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE WALK_ON_TOP_OF_WALL
  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
  MaxHealth       = 99999.0
  End

  Geometry              = BOX
  GeometryMajorRadius   = 40.0
  GeometryMinorRadius   = 114.4
  GeometryHeight        = 54.0
  GeometryIsSmall       = No
  GeometryOffset        = X:-24 Y:0 Z:0
  GeometryRotationAnchorOffset = X:1076.832 Y:0.0
  GeometryContactPoint    = X: 30 Y: 40 Z:0 Grab
  GeometryContactPoint    = X:-65 Y: 40 Z:0 Grab
  GeometryContactPoint    = X: 30 Y:-40 Z:0 Grab
  GeometryContactPoint    = X:-65 Y:-40 Z:0 Grab
  GeometryContactPoint    = X: 10 Y:  0 Z:60
  
  Shadow                = SHADOW_VOLUME
End
;-----------------------------------------------------------------------------

Object BaradDurWall03_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

        WallBoundsMesh = P1	

;        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = Bd23Wall03
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  
  ; *** ENGINEERING Parameters ***  
  KindOf          = SELECTABLE IMMOBILE STRUCTURE WALK_ON_TOP_OF_WALL
  Shadow          = SHADOW_VOLUME
  Body            = ActiveBody ModuleTag_03
  MaxHealth       = 99999.0
  End

  Geometry              = BOX
  GeometryMajorRadius   = 40.0
  GeometryMinorRadius   = 114.4
  GeometryHeight        = 54.0
  GeometryIsSmall       = No
  GeometryOffset        = X:-24 Y:0 Z:0
  GeometryRotationAnchorOffset = X:1076.832 Y:0.0
  GeometryContactPoint    = X: 30 Y: 40 Z:0 Grab
  GeometryContactPoint    = X:-65 Y: 40 Z:0 Grab
  GeometryContactPoint    = X: 30 Y:-40 Z:0 Grab
  GeometryContactPoint    = X:-65 Y:-40 Z:0 Grab
  GeometryContactPoint    = X: 10 Y:  0 Z:60
  
  Shadow                = SHADOW_VOLUME
End
;-----------------------------------------------------------------------------

Object BaradDurStairs_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes

     RampMesh1 = P1	

;        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = Bd23Stair02
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE

    ; *** ENGINEERING Parameters ***  
  KindOf                = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY UNATTACKABLE DONT_HIDE_IF_FOGGED
  RadarPriority = STRUCTURE
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    
    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 3000
  End
  
      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes ;If no, requires upgrade to turn on.
        BonusName        = DefaultWallArmorBonus
        RefreshDelay    = 2000
        ;Range            = 120        ; Range is overridden to affect people on us since we are a wall
        ;TargetEnemy        = Yes    ; Alliances are ignored to affect people on us since we are a wall
    End    

  Geometry              = BOX
  GeometryMajorRadius   = 40.0
  GeometryMinorRadius   = 114.4
  GeometryHeight        = 54.0
  GeometryIsSmall       = No
  GeometryOffset        = X:-24 Y:0 Z:0
  GeometryRotationAnchorOffset = X:1076.832 Y:0.0
  GeometryContactPoint    = X: 30 Y: 40 Z:0 Grab
  GeometryContactPoint    = X:-65 Y: 40 Z:0 Grab
  GeometryContactPoint    = X: 30 Y:-40 Z:0 Grab
  GeometryContactPoint    = X:-65 Y:-40 Z:0 Grab
  GeometryContactPoint    = X: 10 Y:  0 Z:60
  
  Shadow                = SHADOW_VOLUME
End
;-----------------------------------------------------------------------------

Object MordorFurnace01_SubMod

	SelectPortrait = BPCFurnace
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
	ExtraPublicBone = Arrow_01
	ExtraPublicBone = Arrow_02
	ExtraPublicBone = Arrow_03
	ExtraPublicBone = Arrow_04
	ExtraPublicBone = Arrow_05

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    DefaultModelConditionState
		Model = MBFurnace_SKN
		ParticleSysBone = Bone_Smoke04 furnaceFireGlow
		ParticleSysBone = Bone_Smoke04 furnaceSparks
		ParticleSysBone = Bone_Smoke04 furnaceSmoke
		ParticleSysBone = Bone_Fire01 furnaceFire
		ParticleSysBone = glowBone1 furnaceFireGlow1
		ParticleSysBone = glowBone2 furnaceFireGlow1
		ParticleSysBone = steamBone2 furnaceSteam2 FollowBone:Yes
		WeaponLaunchBone = PRIMARY Arrow_
    End 
 
 ; V2 DrawFloor_V1 V2_PIECE*
 
 	;//	Animation state for build placement cursor
	AnimationState = BUILD_PLACEMENT_CURSOR
		BeginScript
   			CurDrawableHideSubObject("N_Window")
			CurDrawableHideSubObject("N_Fire")
   			CurDrawableHideSubObject("V1")
			CurDrawableHideSubObject("V2")
			CurDrawableHideSubObject("DrawFloorV2")
		EndScript
	End
	
	;//	Animation state for phantom structure
	AnimationState = PHANTOM_STRUCTURE
		BeginScript
   			CurDrawableHideSubObject("N_Window")
			CurDrawableHideSubObject("N_Fire")
   			CurDrawableHideSubObject("V1")
			CurDrawableHideSubObject("V2")
			CurDrawableHideSubObject("DrawFloorV2")
		EndScript
	End
	
    IdleAnimationState
		StateName					=   STATE_Idle
		Animation = IdleA
			AnimationName			=	MBFurnace_SKL.MBFurnace_IDLA
			AnimationMode		=	ONCE 
			AnimationBlendTime = 0
		End
		Flags               = RESTART_ANIM_WHEN_COMPLETE 
		FXEvent = Frame:30  Name:FX_FurnaceSteamPool
	End
	

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
	;------------- With industry effect
;    AnimationState = UPGRADE_ECONOMY_BONUS
;		StateName	=	STATE_Idle
;		Animation = IdleA
;			AnimationName		=	MBFurnace_SKL.MBFurnace_IDLA
;			AnimationMode		=	LOOP 
;			AnimationBlendTime	=	0
;		End
;		ParticleSysBone		= None Industry
;	End

		ModelConditionState = SNOW 
			Model			= MBFurnace_SKN
			Texture			= MBFurnace.tga MBFurnace_snow.tga
		End
  End

  PlacementViewAngle  = 0

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE

    Behavior = SubObjectsUpgrade Armor_Upgrade
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = N_FIRE V2 N_WINDOW MUGBLNSLV1 SHOVEL OBJECT01
    End
End
;-----------------------------------------------------------------------------

Object MordorFurnace02_SubMod

	SelectPortrait = BPCFurnace
 
  ; *** ART Parameters ***

  Draw = W3DScriptedModelDraw ModuleTag_Draw
	ExtraPublicBone = Arrow_01
	ExtraPublicBone = Arrow_02
	ExtraPublicBone = Arrow_03
	ExtraPublicBone = Arrow_04
	ExtraPublicBone = Arrow_05

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
    DefaultModelConditionState
		Model = MBFurnace_SKN
		ParticleSysBone = Bone_Smoke04 furnaceFireGlow
		ParticleSysBone = Bone_Smoke04 furnaceSparks
		ParticleSysBone = Bone_Smoke04 furnaceSmoke
		ParticleSysBone = Bone_Fire01 furnaceFire
		ParticleSysBone = glowBone1 furnaceFireGlow1
		ParticleSysBone = glowBone2 furnaceFireGlow1
		ParticleSysBone = steamBone2 furnaceSteam2 FollowBone:Yes
		WeaponLaunchBone = PRIMARY Arrow_
    End 
 
 ; V2 DrawFloor_V1 V2_PIECE*
 
 	;//	Animation state for build placement cursor
	AnimationState = BUILD_PLACEMENT_CURSOR
		BeginScript
   			CurDrawableHideSubObject("N_Window")
			CurDrawableHideSubObject("N_Fire")
   			CurDrawableHideSubObject("V1")
			CurDrawableHideSubObject("V2")
			CurDrawableHideSubObject("DrawFloorV2")
		EndScript
	End
	
	;//	Animation state for phantom structure
	AnimationState = PHANTOM_STRUCTURE
		BeginScript
   			CurDrawableHideSubObject("N_Window")
			CurDrawableHideSubObject("N_Fire")
   			CurDrawableHideSubObject("V1")
			CurDrawableHideSubObject("V2")
			CurDrawableHideSubObject("DrawFloorV2")
		EndScript
	End
	
    IdleAnimationState
		StateName					=   STATE_Idle
		Animation = IdleA
			AnimationName			=	MBFurnace_SKL.MBFurnace_IDLA
			AnimationMode		=	ONCE 
			AnimationBlendTime = 0
		End
		Flags               = RESTART_ANIM_WHEN_COMPLETE 
		FXEvent = Frame:30  Name:FX_FurnaceSteamPool
	End
	

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
	;------------- With industry effect
;    AnimationState = UPGRADE_ECONOMY_BONUS
;		StateName	=	STATE_Idle
;		Animation = IdleA
;			AnimationName		=	MBFurnace_SKL.MBFurnace_IDLA
;			AnimationMode		=	LOOP 
;			AnimationBlendTime	=	0
;		End
;		ParticleSysBone		= None Industry
;	End

		ModelConditionState = SNOW 
			Model			= MBFurnace_SKN
			Texture			= MBFurnace.tga MBFurnace_snow.tga
		End
  End

  PlacementViewAngle  = 0

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE

    Behavior = SubObjectsUpgrade Armor_Upgrade
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = N_FIRE V2 N_WINDOW MUGBLNSLV MOLD INGOTS POOLOMETAL LIQUIDMETAL1
    End
End
;-----------------------------------------------------------------------------

Object MordorRockBridge_SubMod

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
 
    OkToChangeModelColor = Yes		
     StaticModelLODMode = yes
	
;        RandomTexture = minasmorgul1.tga 0 minasmorgul1_festung.tga

   DefaultModelConditionState
   Model = Mb23RockBridge
   End
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Civilian
  EditorSorting       = STRUCTURE
End
;-----------------------------------------------------------------------------

Object MordorIndustry01_SubMod

    SelectPortrait =  BRAngmarSchmelze
 
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes
        StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

        ExtraPublicBone = ARROW01
        ExtraPublicBone = ARROW02
        ExtraPublicBone = ARROW03
        ExtraPublicBone = ARROW04
    
        RandomTexture = kuorcwar.tga  0 kuorcwar.tga
        RandomTexture = kuorcwar02.tga  0 kuorcwar.tga
        RandomTexture = kuorcwar03.tga  0 kuorcwar.tga

        DefaultModelConditionState
            Model = kbschmelze_skn
            WeaponLaunchBone = PRIMARY ARROW 
        End


    IdleAnimationState
        StateName                    =   STATE_Idle
        Animation = idla
            AnimationName            =    kbschmelze_skl.kbschmelze_idla
            AnimationMode        =    ONCE 
            AnimationBlendTime = 0
        End
        Animation = idlb
            AnimationName            =    kbschmelze_skl.kbschmelze_idlb
            AnimationMode        =    ONCE 
            AnimationBlendTime = 0
        End
        ParticleSysBone = SMOKEBONE furnaceFireGlow
        ParticleSysBone = SMOKEBONE furnaceSparks
        ParticleSysBone = SMOKEBONE furnaceSmoke
        ParticleSysBone = SMOKEBONE01 furnaceSteam1
        ParticleSysBone = SMOKEBONE01 furnaceSparks
        ;Flags               = RESTART_ANIM_WHEN_COMPLETE 
        FXEvent = Frame:30  Name:FX_FurnaceSteamPool
    End



   ;------------ New Build Up States coming soon. 
        
        ModelConditionState = SNOW AWAITING_CONSTRUCTION
            Model   = kbschmelze_a       
            Texture = KBMill.tga KBMill_snow.tga
        End          
        
        ModelConditionState   = AWAITING_CONSTRUCTION 
            Model               = kbschmelze_a
        End
        AnimationState        = AWAITING_CONSTRUCTION
            Animation           =  kbschmelze_a
                AnimationName     =  kbschmelze_a.kbschmelze_a
                AnimationMode     = MANUAL
                AnimationBlendTime = 0
            End
            Flags                  = START_FRAME_FIRST
        End

        ModelConditionState   = SNOW ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model    = kbschmelze_a       
            Texture = KBForge.tga KBForge_Snow.tga
            ParticleSysBone   = NONE BuildingContructDust FollowBone:Yes
        End      
        
        ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model             = kbschmelze_a
            ParticleSysBone   = NONE BuildingContructDust FollowBone:Yes
        End
        
        AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Animation           = kbschmelze_a
                AnimationName     = kbschmelze_a.kbschmelze_a
                AnimationMode     = MANUAL
                AnimationBlendTime = 0
            End
            Flags                  = START_FRAME_FIRST
            StateName              = BeingConstructed
            BeginScript
                CurDrawablePlaySound("GondorBarracksBeginConstruction")
            EndScript
        End
        
;----- Damage states

        ModelConditionState  = DAMAGED
            Model         = kbschmelze_skn
            Texture  = KBForge.tga KBForge_d.tga
        End
        
        AnimationState = DAMAGED
            EnteringStateFX    = FX_BuildingDamaged
            Animation                =    RubbleAnimation
                AnimationName        =     kbschmelze_skn.kbschmelze_skn
                AnimationMode        =    ONCE
            End
            BeginScript
                   CurDrawableHideSubObject("CYLINDER01")
                   CurDrawableHideSubObject("ORC")
            EndScript
        End

        ModelConditionState  = REALLYDAMAGED
            Model         = kbschmelze_skn
            Texture  = KBForge.tga KBForge_d.tga
        End
        
        AnimationState = REALLYDAMAGED
            EnteringStateFX    = FX_BuildingReallyDamaged
            Animation                =    RubbleAnimation
                AnimationName        =     kbschmelze_skn.kbschmelze_skn
                AnimationMode        =    ONCE
            End
            BeginScript
                   CurDrawableHideSubObject("CYLINDER01")
                   CurDrawableHideSubObject("ORC")
            EndScript
        End

        ModelConditionState  =  COLLAPSING ;DYING
            Model         = kbschmelze_skn
            Texture  = KBForge.tga KBForge_d.tga
        End
        
        AnimationState =  COLLAPSING ;DYING
            Animation                =    RubbleAnimation
                AnimationName        =     kbschmelze_skn.kbschmelze_skn
                AnimationMode        =    ONCE
            End
            BeginScript
                   CurDrawableHideSubObject("CYLINDER01")
                   CurDrawableHideSubObject("ORC")
            EndScript
            EnteringStateFX    = FX_StructureMediumCollapse
        End
        
        ModelConditionState  = RUBBLE
            Model         = NONE
            ParticleSysBone SmokeLarge01 SmokeBuildingLarge
        End
        
        AnimationState = RUBBLE
        End

        ModelConditionState  = POST_RUBBLE
            Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End
            AnimationState = POST_RUBBLE
        End

        ModelConditionState  = POST_COLLAPSE
            Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End

        AnimationState = POST_COLLAPSE
        End      

        ModelConditionState = SNOW 
            Model    = kbschmelze_skn
            Texture  = KBForge.tga KBForge_Snow.tga
        End       
    End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GondorWorkshop
  Description         = OBJECT:GondorWorkshopDescription
  Side                = Mordor
  EditorSorting       = STRUCTURE

    Behavior = SubObjectsUpgrade ModuleTag_HideAll
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = V1 V2
    End

    Geometry              = CYLINDER
    GeometryName          = Geom_Orig
    GeometryMajorRadius   = 42.0
    GeometryMajorRadius   = 42.0
    GeometryHeight        = 95.8
    
    AdditionalGeometry    = CYLINDER
    GeometryName          = Geom_V2
    GeometryMajorRadius   = 12.0
    GeometryMinorRadius   = 12.0
    GeometryHeight        = 90.0      
    GeometryOffset        = X:36 Y:-8 Z:0    

    
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    BuildCompletion       = PLACED_BY_PLAYER
    
    GeometryContactPoint    = X:-27.325       Y:-25.726      Z:0            Repair
    GeometryContactPoint    = X:18.049        Y:29.807       Z:0            Repair
    GeometryContactPoint    = X:40.467        Y:31.862       Z:0
    GeometryContactPoint    = X:-40.325       Y:-43.891      Z:0
    GeometryContactPoint    = X:3.534         Y:0.006        Z:97.644       Swoop
End
;-----------------------------------------------------------------------------

Object LumberMillNoWorkers_SubMod
 
 SelectPortrait = BPCLumberMill
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day

;  Draw                = W3DModelDraw ModuleTag_01
;    OkToChangeModelColor = Yes
;
;    DefaultConditionState
;      Model           = RBBarracks
;;     FXEvent = 1  FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;;     FXEvent = 30 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;;     FXEvent = 50 FX_TrebuchetImpactHit ; sample of method to fire FXList at desired animation frames
;    End
;  End


  Draw = W3DScriptedModelDraw ModuleTag_Draw

	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_03
	ExtraPublicBone = ARROW_04
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	ExtraPublicBone = ARROW_07
	ExtraPublicBone = ARROW_08

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
	DefaultModelConditionState
		Model = MBLumMill_SKN
	  
		;ParticleSysBone = Bone_Smoke01 forgeSmoke
		;ParticleSysBone = Bone_Fire01 FireBuildingLarge

;		ParticleSysBone = Bone_Smoke01 CampFireSmoke
;		ParticleSysBone = Bone_Smoke01 CampfireGlow
		ParticleSysBone = Bone_Smoke01 CampfireEmbersReg
		WeaponLaunchBone = PRIMARY ARROW_
	End
          
	;//	Animation state for build placement cursor
	AnimationState = BUILD_PLACEMENT_CURSOR
		Animation = IdleA
			AnimationName		=	MBLumMill_SKL.MBLumMill_IDLD
			AnimationMode		=	LOOP 
			AnimationBlendTime	=	0
		End	
		BeginScript
   			CurDrawableHideSubObject("N_Window")
			CurDrawableHideSubObject("N_Fire")
   			CurDrawableHideSubObject("V1")
			CurDrawableHideSubObject("V2")
			CurDrawableHideSubObject("DrawFloorV2")
			CurDrawableHideSubObject("OBJECT01")
			CurDrawableHideSubObject("OBJECT02")
			CurDrawableHideSubObject("OBJECT03")
			CurDrawableHideSubObject("OBJECT04")
			CurDrawableHideSubObject("OBJECT05")
			CurDrawableHideSubObject("OBJECT06")
			CurDrawableHideSubObject("ORC")
			CurDrawableHideSubObject("ORCN")
		EndScript
	End
	
	;//	Animation state for phantom structure
	AnimationState = PHANTOM_STRUCTURE
		Animation = IdleA
			AnimationName		=	MBLumMill_SKL.MBLumMill_IDLD
			AnimationMode		=	LOOP 
			AnimationBlendTime	=	0
		End	
		BeginScript
   			CurDrawableHideSubObject("N_Window")
			CurDrawableHideSubObject("N_Fire")
   			CurDrawableHideSubObject("V1")
			CurDrawableHideSubObject("V2")
			CurDrawableHideSubObject("DrawFloorV2")
			CurDrawableHideSubObject("OBJECT01")
			CurDrawableHideSubObject("OBJECT02")
			CurDrawableHideSubObject("OBJECT03")
			CurDrawableHideSubObject("OBJECT04")
			CurDrawableHideSubObject("OBJECT05")
			CurDrawableHideSubObject("OBJECT06")
			CurDrawableHideSubObject("ORC")
			CurDrawableHideSubObject("ORCN")
		EndScript
	End
	
    IdleAnimationState
		StateName	=	STATE_Idle
		Animation = IdleA
			AnimationName		=	MBLumMill_SKL.MBLumMill_IDLD
			AnimationMode		=	LOOP 
			AnimationBlendTime	=	0
		End
		FXEvent				= Frame:193 Name:FX_LumberFire
		Flags               = RANDOMSTART 
	End
	
    ;------------ Build Up States
    ModelConditionState   = AWAITING_CONSTRUCTION SNOW
      Model               = MBLumMill_A
      Texture			= MBLumberMill.tga MBLumberMill_snow.tga
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = MBLumMill_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End;
    AnimationState        = AWAITING_CONSTRUCTION
      Animation           =  MBLumMill_A
        AnimationName     =  MBLumMill_ASKL.MBLumMill_ABLD
        AnimationMode     = MANUAL
        AnimationBlendTime = 0
      End
	Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED SNOW
      Model               = MBLumMill_A
      Texture			= MBLumberMill.tga MBLumberMill_snow.tga
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = MBLumMill_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End;
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = MBLumMill_A
			AnimationName     = MBLumMill_ASKL.MBLumMill_ABLD
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
	BeginScript
		CurDrawablePlaySound("GondorBarracksBeginConstruction")
	EndScript
    End
    
    
        ;--damaged building
    
    ModelConditionState  = DAMAGED
      Model         = MBLumMill_D1
        ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingMedium
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingMedium 
    End
    AnimationState = DAMAGED
     EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = MBLumMill_D2  
        ParticleSysBone FireSmall01 FireBuildingLarge
		ParticleSysBone FireSmall02 FireBuildingLarge
		ParticleSysBone FireSmall03 SmokeBuildingLarge
		ParticleSysBone FireSmall04 FireBuildingMedium
		ParticleSysBone FireSmall05 FireBuildingLarge 
    End
    AnimationState = REALLYDAMAGED
    	Animation				=	RubbleAnimation
			AnimationName		=	MBLumMill_D2SK.MBLumMill_D2AN
			AnimationMode		=	ONCE
  		End
     	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = MBLumMill_D2  
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    AnimationState = RUBBLE
      Animation				=	RubbleAnimation
			AnimationName		=	MBLumMill_D3SK.MBLumMill_D3AN
			AnimationMode		=	ONCE
  	  End
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

	;------------- With fuels the fire effect	
 ;   AnimationState = UPGRADE_ECONOMY_BONUS
;		StateName	=	STATE_Idle
;		Animation = IdleA
;			AnimationName		=	MBLumMill_SKL.MBLumMill_IDLD
;			AnimationMode		=	LOOP 
;			AnimationBlendTime	=	0
;		End
;		FXEvent			= Frame:193 Name:FX_LumberFire
;		ParticleSysBone		= None FueltheFiresEmbers
;	End

  	ModelConditionState = SNOW 
		Model			= MBLumMill_SKN
		Texture			= MBLumberMill.tga MBLumberMill_snow.tga
	End
	        
  End

  PlacementViewAngle  = 0

  DisplayName         = OBJECT:LumberMill
  Description         = OBJECT:LumberMillDescription
  Side                = Mordor
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  AdditionalGeometry    = CYLINDER
  GeometryName			= Geom_Orig
  GeometryMajorRadius   = 55.0
  GeometryMinorRadius   = 55.0
  GeometryHeight        = 40.0
  GeometryOffset		= X:-8 Y:3.5 Z:0
    
  AdditionalGeometry    = CYLINDER
  GeometryName			= Geom_V2
  GeometryMajorRadius   = 16
  GeometryMinorRadius   = 16
  GeometryHeight        = 76.0
  GeometryOffset		= X:-40 Y:-33 Z:0

; ;
	AdditionalGeometry		= CYLINDER
	GeometryName			= TERRAIN_BOUNDS
	GeometryMajorRadius		= 80
	GeometryMinorRadius		= 10
	GeometryHeight			= 0.8
	GeometryOffset			= X:0 Y:0 Z:0
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
  GeometryContactPoint	= X:-34.46		Y:58.195	Z:0			Repair
  GeometryContactPoint	= X:32.816		Y:-12.328	Z:0			Repair
  GeometryContactPoint	= X:37.903		Y:52.182	Z:0
  GeometryContactPoint	= X:-61.108		Y:-23.796	Z:0
  GeometryContactPoint	= X:-38.697		Y:-10.41	Z:45.943	Swoop
End
;-----------------------------------------------------------------------------